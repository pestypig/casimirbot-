Love it‚Äîhere‚Äôs a clean, minimal way to ship the role ‚Üí station flow without disturbing the rest of the app.

Below are drop‚Äëin files/patches:

‚∏ª

1) Add a live metrics hook (shared by panels)

client/src/hooks/use-metrics.ts

import * as React from "react";

export type HelixMetrics = {
  energyOutput: number;          // MW
  exoticMass: number;            // kg
  timeScaleRatio: number;        // TS
  curvatureMax: number;          // proxy
  fordRoman: { value:number; limit:number; status:"PASS"|"FAIL" };
  sectorStrobing?: number;       // sectors active
  activeTiles?: number;
  totalTiles?: number;
  gammaVanDenBroeck?: number;
  modelMode?: string;
};

export function useMetrics(pollMs = 2000) {
  const [data, setData] = React.useState<HelixMetrics | null>(null);
  const [err, setErr] = React.useState<string | null>(null);

  React.useEffect(() => {
    let alive = true;
    const tick = async () => {
      try {
        const r = await fetch("/api/helix/metrics");
        if (!r.ok) throw new Error(`HTTP ${r.status}`);
        const j = await r.json();
        if (alive) setData(j);
      } catch (e:any) {
        if (alive) setErr(e.message ?? "network error");
      }
    };
    tick();
    const id = setInterval(tick, pollMs);
    return () => { alive = false; clearInterval(id); };
  }, [pollMs]);

  return { data, err };
}


‚∏ª

2) Station page (one page, 4 roles), with top tabs

client/src/pages/station.tsx

import * as React from "react";
import { Link, useParams, useNavigate } from "react-router-dom";
import { useMetrics } from "@/hooks/use-metrics";

type RoleKey = "optimist" | "engineer" | "diplomat" | "strategist";

const ROLE_META: Record<RoleKey, {
  title: string; emoji: string; tagline: string;
  panels: Array<{ id: string; title: string; render: (m: ReturnType<typeof useMetrics>["data"])=>React.ReactNode }>;
}> = {
  optimist: {
    title: "Radiant Optimist", emoji: "üåû",
    tagline: "The light we save today will shine for a billion tomorrows.",
    panels: [
      {
        id: "energy-positivity",
        title: "Energy Positivity",
        render: (m) => (
          <MetricLine items={[
            ["Energy Output", m?.energyOutput ? `${m.energyOutput.toFixed(1)} MW` : "‚Äî"],
            ["Exotic Mass",   m?.exoticMass ? `${Math.round(m.exoticMass).toLocaleString()} kg` : "‚Äî"],
            ["Ford‚ÄìRoman",    m?.fordRoman ? `${m.fordRoman.status} (Œ∂ = ${fmt(m.fordRoman.value)})` : "‚Äî"],
          ]}/>
        )
      },
      {
        id: "array-health",
        title: "Casimir Array Health",
        render: (m) => (
          <Bar label="Active Tiles"
               num={m?.activeTiles ?? 0}
               den={m?.totalTiles ?? 1} />
        )
      },
    ]
  },

  engineer: {
    title: "The Engineer", emoji: "‚öôÔ∏è",
    tagline: "Every equation is a bridge; every weld, a promise.",
    panels: [
      {
        id: "amplification",
        title: "Amplification Chain (live)",
        render: (m) => (
          <MetricLine items={[
            ["Œ≥_VdB", m?.gammaVanDenBroeck ? fmt(m.gammaVanDenBroeck) : "‚Äî"],
            ["Curvature Max (proxy)", m?.curvatureMax ? fmt(m.curvatureMax) : "‚Äî"],
            ["Model", m?.modelMode ?? "‚Äî"],
          ]}/>
        )
      },
      {
        id: "sectors",
        title: "Sector Strobing",
        render: (m) => (
          <MetricLine items={[
            ["Active Sectors", m?.sectorStrobing ? `${m.sectorStrobing}` : "‚Äî"],
            ["Active Tiles", m?.activeTiles ? m.activeTiles.toLocaleString() : "‚Äî"],
          ]}/>
        )
      },
    ]
  },

  diplomat: {
    title: "The Diplomat", emoji: "üêº",
    tagline: "In harmony, the cosmos folds itself around us.",
    panels: [
      {
        id: "timescale",
        title: "Time‚ÄëScale Ratio",
        render: (m) => (
          <MetricLine items={[
            ["TS ratio", m?.timeScaleRatio ? fmt(m.timeScaleRatio) : "‚Äî"],
            ["Energy Output", m?.energyOutput ? `${m.energyOutput.toFixed(1)} MW` : "‚Äî"],
          ]}/>
        )
      },
      {
        id: "harmony",
        title: "Frame Harmony",
        render: () => <p className="text-sm text-slate-300">Frames in sync. Environmental drift ‚âà minimal (display stub).</p>
      },
    ]
  },

  strategist: {
    title: "The Strategist", emoji: "üêí",
    tagline: "Even the smallest stone changes the course of the river.",
    panels: [
      {
        id: "tactics",
        title: "Tactical Overview",
        render: (m) => (
          <MetricLine items={[
            ["Curvature Max (proxy)", m?.curvatureMax ? fmt(m.curvatureMax) : "‚Äî"],
            ["Energy Output", m?.energyOutput ? `${m.energyOutput.toFixed(1)} MW` : "‚Äî"],
            ["Exotic Mass", m?.exoticMass ? `${Math.round(m.exoticMass).toLocaleString()} kg` : "‚Äî"],
          ]}/>
        )
      },
      {
        id: "routes",
        title: "Orbital / Rescue Map",
        render: () => <p className="text-sm text-slate-300">Route planner & sector allocation (link to Bridge / Mission Planner).</p>
      },
    ]
  },
};

export default function StationPage() {
  const { role = "optimist" } = useParams<{role:RoleKey}>();
  const navigate = useNavigate();
  const { data, err } = useMetrics();

  const meta = ROLE_META[(role as RoleKey)] ?? ROLE_META.optimist;

  return (
    <div className="min-h-screen bg-slate-900 text-slate-100">
      {/* Top nav */}
      <div className="border-b border-slate-800 bg-slate-900/70 sticky top-0 backdrop-blur">
        <div className="mx-auto max-w-6xl px-4 py-3 flex items-center gap-3">
          <div className="text-xl font-semibold">HELIX ‚Ä¢ Station</div>
          <div className="ml-auto flex items-center gap-2 text-sm">
            <NavTab to={`/station/${role}`} label="Station" active />
            <NavTab to="/bridge"        label="Bridge" />
            <NavTab to="/documentation" label="Documentation" />
            <NavTab to="/helix-core"    label="Energy Core" />
            <NavTab to="/start"         label="Change Profile" />
          </div>
        </div>
      </div>

      {/* Hero */}
      <div className="mx-auto max-w-6xl px-4 py-8">
        <h1 className="text-3xl font-semibold">{meta.emoji} {meta.title}</h1>
        <p className="mt-2 text-slate-300">{meta.tagline}</p>

        {err && <p className="mt-3 text-rose-300 text-sm">Metrics error: {err}</p>}

        {/* Panels */}
        <div className="mt-6 grid grid-cols-1 md:grid-cols-2 gap-4">
          {meta.panels.map(p => (
            <section key={p.id} className="rounded-xl border border-slate-800 bg-slate-800/40 p-4">
              <h2 className="text-lg font-medium mb-3">{p.title}</h2>
              {p.render(data)}
            </section>
          ))}
        </div>
      </div>
    </div>
  );
}

/* ---------- small UI helpers ---------- */

function NavTab({to,label,active=false}:{to:string;label:string;active?:boolean}) {
  const cls = active
    ? "px-3 py-1 rounded-md bg-slate-700 text-slate-100"
    : "px-3 py-1 rounded-md hover:bg-slate-800 text-slate-300";
  return <Link to={to} className={cls}>{label}</Link>;
}

function MetricLine({items}:{items:[string,string][]}) {
  return (
    <div className="space-y-2">
      {items.map(([k,v])=>(
        <div key={k} className="flex justify-between text-sm">
          <span className="text-slate-300">{k}</span>
          <span className="text-slate-100 font-medium">{v}</span>
        </div>
      ))}
    </div>
  );
}

function Bar({label,num,den}:{label:string;num:number;den:number}) {
  const frac = Math.max(0, Math.min(1, den ? num/den : 0));
  return (
    <div>
      <div className="flex justify-between text-sm mb-1">
        <span className="text-slate-300">{label}</span>
        <span className="text-slate-100 font-medium">{num.toLocaleString()} / {den.toLocaleString()}</span>
      </div>
      <div className="h-2 rounded bg-slate-800 overflow-hidden">
        <div className="h-full bg-cyan-400" style={{width:`${frac*100}%`}}/>
      </div>
    </div>
  );
}

function fmt(n:number){ 
  if (n === 0) return "0";
  const a = Math.abs(n);
  if (a >= 1e6 || a < 1e-3) return n.toExponential(2);
  return a >= 1000 ? Math.round(n).toLocaleString() : n.toFixed(3);
}


‚∏ª

3) Update routes

client/src/App.tsx (add the route)

// ‚Ä¶
import StationPage from "@/pages/station";
// ‚Ä¶

<Routes>
  {/* your existing routes */}
  <Route path="/station/:role" element={<StationPage />} />
  {/* Convenience short paths (optional): */}
  <Route path="/optimist-station" element={<StationPage />} />
  <Route path="/engineer-station" element={<StationPage />} />
  <Route path="/diplomat-station" element={<StationPage />} />
  <Route path="/strategist-station" element={<StationPage />} />
</Routes>


‚∏ª

4) Change the start page button & links

Update your client/src/pages/start.tsx so the main button says ‚ÄúEnter Station‚Äù and routes to /station/<role> (and card click also routes).

Find the button/link section and replace with:

// inside your selected profile footer:
<Link
  to={`/station/${selected}`}
  className="inline-flex items-center px-4 py-2 rounded-lg bg-cyan-500 hover:bg-cyan-400 text-slate-900 font-semibold shadow"
>
  Enter Station
</Link>

If you also made each card clickable, make sure the onClick now navigates to /station/${role} instead of HELIX-CORE.

‚∏ª

Result
	‚Ä¢	Landing at /start (or your root if you redirect) ‚Üí pick a role ‚Üí Enter Station.
	‚Ä¢	You land on /station/:role with a calm top tab bar to jump to /bridge, /documentation, /helix-core, or ‚ÄúChange Profile‚Äù.
	‚Ä¢	The station shows role‚Äëappropriate live panels driven by /api/helix/metrics (safe, read‚Äëonly).
	‚Ä¢	You can expand each role later with richer, role‚Äëspecific components without changing the shell.

If you want me to also add links from Strategist ‚Üí Mission Planner or from Engineer ‚Üí Amplification Chain deep widgets you already have, I can wire those quickly.