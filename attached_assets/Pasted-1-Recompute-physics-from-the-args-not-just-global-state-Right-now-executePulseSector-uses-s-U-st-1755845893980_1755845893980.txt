1) Recompute physics from the args (not just global state)

Right now executePulseSector uses s.U_static which was computed for the pipeline’s current gap/area. If a caller asks for, say, 0.8 nm, you want the energy/force to reflect that. Drop in these helpers and switch the function to use them.

// ── Local Casimir helpers (plates) ───────────────────────────────────────────
const HBAR = 1.054_571_8e-34;           // J·s
const C    = 299_792_458;               // m/s
const PI   = Math.PI;

// Energy per area:  E/A = −π² ℏ c / (720 a³)
function casimirEnergyPerTile(gap_m: number, area_m2: number): number {
  const E_over_A = -(PI*PI*HBAR*C) / (720 * Math.pow(gap_m, 3)); // J/m²
  return E_over_A * area_m2;                                      // J
}

// Pressure: P = −π² ℏ c /(240 a⁴),  Force = P·A
function casimirForce(area_m2: number, gap_m: number): number {
  const P = -(PI*PI*HBAR*C) / (240 * Math.pow(gap_m, 4)); // N/m²
  return P * area_m2;                                     // N
}


Now patch executePulseSector:

async function executePulseSector(args: z.infer<typeof pulseSectorSchema>) {
  const s = getGlobalPipelineState();

  // area: respect pipeline default unless you later add an explicit override param
  const area_m2 = (s.tileArea_cm2 ?? 25) * 1e-4;
  const gap_m   = args.gap_nm * 1e-9;

  // tile energy for THIS gap (do not reuse s.U_static if gaps differ)
  const energy_J = casimirEnergyPerTile(gap_m, area_m2);
  const force_N  = casimirForce(area_m2, gap_m);

  // dissipation and proxies remain pipeline-coupled
  const powerLoss_W_per_tile = s.P_loss_raw;
  const curvatureMass_kg = Math.abs(energy_J) / (C*C);

  return {
    sectorId: args.sectorId,
    gap_m,
    area_m2,
    energy_J,
    force_N,
    powerLoss_W_per_tile,
    curvatureMass_kg,
    status: "PULSED"
  };
}


bonus: you can later add an optional tileArea_cm2 override in the schema and compute area_m2 from it. radius_mm is currently unused (fine); if you intend it as tile radius, you could compute area_m2 = PI*(radius_mm*1e-3)**2. If it’s a curvature radius, leave it out of area.