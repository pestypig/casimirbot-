Great—this file is in solid shape, but a few numbers drift from the pipeline and a couple of labels/guards don’t match the underlying physics. Here’s a tight pass highlighting inconsistencies + drop-in fixes.

# Biggest mismatches vs the pipeline

1. # of sectors, duty, and “active tiles”

* **Your rule now:** when `sectors > 1`, show `totalTiles / sectors`; when `sectors = 1`, show `totalTiles * duty`.
* **Pipeline reality:** the **local ON window** is always gated by `BURST_DUTY_LOCAL = 0.01`, and the **ship-wide effective duty** is `d_eff = 0.01 * (S_live / 400)`.
* **Impact:** in `hover` you’ll display far too many “active tiles” (because you ignore the 1% burst clamp).
  **Fix:** fold in `BURST_DUTY_LOCAL` for both cases:

```ts
// replaces deriveActiveTiles(...)
const deriveActiveTiles = (totalTiles?: number, sectors?: number, duty?: number, mode?: Mode) => {
  if (!isFiniteNumber(totalTiles) || !isFiniteNumber(sectors) || sectors <= 0) return undefined;
  if (mode === 'standby' || !isFiniteNumber(duty) || duty <= 0) return 0;
  const BURST = 0.01;
  if (sectors > 1) {
    // one sector at a time, but only 1% of tiles in that sector are ON in the local window
    return Math.round((totalTiles / sectors) * BURST);
  } else {
    // no strobe; a duty fraction of the whole grid can be "eligible", but still burst-gated
    return Math.round(totalTiles * duty * BURST);
  }
};
```

2. γ\_VdB defaults and tooltip copy

* **UI default:** `gammaVanDenBroeck: pipeline?.gammaVanDenBroeck || 2.86e5` and tooltip says it “doesn’t vary with duty/sectoring.”
* **Pipeline behavior:** γ\_VdB is the **mass-only calibration knob** and **changes by mode** to hit the mass target (e.g., \~**3.83×10¹** in hover/emergency, \~**1.53×10⁴** in cruise).
  **Fix:**

  * Change the default to something neutral (e.g., `3.83e1`) and **let the live pipeline value drive it**.
  * Update tooltip: “γ\_VdB is a geometry-derived amplification **used as a mass-only calibration** here; it **does vary by mode** to hold the M target.”

3. Time-scale separation (TS)

* **UI default:** `TS_ratio || 4102.74` and badge says SAFE when `< 1`.
* **Pipeline calc:** `TS_ratio = T_long / T_m = (L_long/c) / (1/f) = f L_long / c`.
  With `L_long ≈ 1007 m` and `f = 15 GHz`, **TS\_ratio ≈ 5.0×10⁴**, not \~4.1×10³.
* **Semantics:** Your badge marks SAFE when `< 1`, but with the pipeline’s definition, **normal operating values are >> 1**. Either:

  * (A) **Keep the definition** and invert the badge copy to “CHECK” unless a different constraint is intended, or
  * (B) **Redefine TS to its reciprocal** (`TS' = T_m / T_long`) and keep “SAFE when < 1” logic.
    **Fix (simplest):** keep pipeline TS, change default and badge:

```tsx
// defaults used around the app
tsRatio={pipeline?.TS_ratio ?? 5.03e4}

// badge condition (SAFE when TS_ratio >> 1 per your current physical intent)
<Badge className={ (pipeline?.TS_ratio ?? 0) > 1 ? 'bg-green-500/20 text-green-400' : 'bg-yellow-500/20 text-yellow-400' }>
  { (pipeline?.TS_ratio ?? 0) > 1 ? 'SAFE' : 'CHECK' }
</Badge>
```

4. ζ (Ford–Roman proxy) and fallbacks

* **UI fallback:** `'0.032'` appears in a few places.
* **Pipeline values:** `ζ = 1/(d_eff √1e12)` → **hover/emergency:** 0.0001, **cruise:** 0.04.
  **Fix:** remove `'0.032'` magic default; show `—` or compute from `pipeline.dutyEffective_FR` if present.

5. Power/Mass defaults shown in visualizers

* **UI fallbacks:** `powerAvg_MW: pipeline?.P_avg || 83.3`, `exoticMass_kg: pipeline?.M_exotic || 1405`.
* **Pipeline:** power/mass are **mode-calibrated**; those numbers are only correct in **hover**.
  **Fix:** prefer `pipeline` values; if absent, **read the mode** and load the corresponding target from the **same source** the pipeline uses (i.e., `MODE_POLICY`). Avoid showing hover numbers in cruise.

6. ε\_tilt (shift vector) mismatch

* You compute a tiny physically-derived `epsilonTilt` (`≤5e-7`) then pass **hard default 0.012** into `WarpVisualizer` and `shift`, overwriting the small value.
  **Fix:** pass through the computed value (or the live `systemMetrics.shiftVector?.epsilonTilt`), never the `0.012` fallback:

```tsx
const epsilonTiltCalc = Math.min(5e-7, Math.max(0, (gTarget * R_geom) / (c*c)));
...
epsilonTilt: systemMetrics?.shiftVector?.epsilonTilt ?? epsilonTiltCalc,
...
shift: { epsilonTilt: systemMetrics?.shiftVector?.epsilonTilt ?? epsilonTiltCalc, ... }
```

7. “Curvature Threshold” card units

* You label `R` but compute `|U_cycle| / c²` (that’s **mass**, not curvature\*\*).
  **Fix:** either relabel to “Energy budget proxy” or compute a proper curvature proxy if you have one. For now:

```tsx
<span className="text-sm">Energy Budget Proxy</span>
<span className="font-mono text-sm">
  M_eq = {fexp( Math.abs(pipelineState?.U_cycle ?? 0) / 9e16, 0, '—')} kg
</span>
```

# Smaller magic numbers worth centralizing

* `400` (sectors): already consistent with the pipeline’s `TOTAL_SECTORS`. **Import once** or export a `SECTORS_TOTAL` constant from the pipeline hook and reuse here (you already hardcode in multiple places).
* `0.01` (burst duty): used implicitly in UI logic—**make it explicit** and align with the pipeline’s `BURST_DUTY_LOCAL`.
* `83.3` (MW), `1405` (kg), `120` (MW pMax), `2,800,000` (tiles fallback), `1e9` (Q\_BURST): centralize behind your `use-energy-pipeline` so the UI never diverges.
* Trail decay `0.90`, strobe visualization scales, galaxy map constants: these are visual, fine to stay local, but consider top-level `const` with a comment.

# Quick diffs you can apply now

* **Use shared constants from the pipeline hook**

```ts
// hooks/use-energy-pipeline.ts (export these)
export const PIPE_CONST = {
  TOTAL_SECTORS: 400,
  BURST_DUTY_LOCAL: 0.01,
  Q_BURST: 1e9,
  MODE_TARGETS: {
    hover:    { P_W: 83.3e6, M_kg: 1000 },
    cruise:   { P_W: 7.437e-6, M_kg: 1000 }, // 7.437 µW
    emergency:{ P_W: 297.5e6, M_kg: 1000 },
    standby:  { P_W: 0, M_kg: 0 }
  }
};
```

Then in this file import and reference `PIPE_CONST` instead of hard numbers.

* **Replace ζ fallback** everywhere:

```tsx
ζ = { fmt(pipelineState?.zeta ?? systemMetrics?.fordRoman?.value, 3, '—') }
```

* **WarpVisualizer props (avoid hover defaults in other modes):**

```tsx
powerAvg_MW: isFiniteNumber(pipeline?.P_avg) 
  ? pipeline.P_avg 
  : (PIPE_CONST.MODE_TARGETS[effectiveMode].P_W / 1e6),
exoticMass_kg: isFiniteNumber(pipeline?.M_exotic)
  ? pipeline.M_exotic
  : PIPE_CONST.MODE_TARGETS[effectiveMode].M_kg,
gammaVanDenBroeck: isFiniteNumber(pipeline?.gammaVanDenBroeck)
  ? pipeline.gammaVanDenBroeck
  : 3.83e1 // neutral hover-like seed instead of 2.86e5
```

* **TS badge logic** (pick one of the two semantics; example keeps pipeline’s TS and marks SAFE when >1):

```tsx
const ts = pipelineState?.TS_ratio ?? systemMetrics?.timeScaleRatio;
<Badge className={ (ts ?? 0) > 1 ? 'bg-green-500/20 text-green-400' : 'bg-yellow-500/20 text-yellow-400' }>
  { (ts ?? 0) > 1 ? 'SAFE' : 'CHECK' }
</Badge>
```

# One UX suggestion

Where you show “Active Tiles (Energized)”, add a tiny caption with the exact formula you’re using for clarity:

```
instant ≈ (N_tiles / S_live) × 0.01   (if S_live > 1)
instant ≈ N_tiles × duty × 0.01       (if S_live = 1)
```

That will keep it obviously consistent with the pipeline’s `d_eff` and the 1% local window.

If you’d like, I can produce a tiny shared `ui-physics.ts` module exporting these getters (instant active tiles, TS text, ζ text, power/mass targets by mode) so every panel references the same functions—zero drift.
