4) Gate engine boot in WarpBubbleCompare the same way
apply_patch << 'PATCH'
*** Begin Patch
*** Update File: src/components/WarpBubbleCompare.tsx
@@
-import { sizeCanvasSafe, clampMobileDPR } from '@/lib/gl/capabilities';
+import { sizeCanvasSafe, clampMobileDPR } from '@/lib/gl/capabilities';
+import { webglSupport } from '@/lib/gl/webgl-support';
+import CanvasFallback from '@/components/CanvasFallback';
@@
   const leftRef = useRef<HTMLCanvasElement>(null);
   const rightRef = useRef<HTMLCanvasElement>(null);
   const leftEngine = useRef<any>(null);
   const rightEngine = useRef<any>(null);
+  const [loadError, setLoadError] = React.useState<string | null>(null);
@@
   async function reinitEnginesFromParams() {
-    await ensureScript();
+    // Strong detection up-front
+    const support = webglSupport();
+    if (!support.ok) {
+      setLoadError(support.reason || 'WebGL not available');
+      return;
+    }
+    await ensureScript();
@@
   }
@@
   return (
-    <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
+    loadError ? (
+      <div className="p-4">
+        <CanvasFallback
+          title="WebGL could not start"
+          reason={String(loadError)}
+          onRetry={() => {
+            try { (window as any).__forceReloadWarpEngine?.(); } catch {}
+            window.location.reload();
+          }}
+        />
+      </div>
+    ) : (
+    <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
       <div className="rounded-md overflow-hidden bg-black/40" style={{ aspectRatio: '16 / 10', minHeight: '320px' }}>
         <div className="px-2 py-1 text-xs font-mono text-slate-300">{realPanelTitle}</div>
         <canvas
           ref={leftRef}
           className="w-full h-[calc(100%-32px)] block"
           style={{ background: '#111', display: 'block' }}
         />
       </div>
       <div className="rounded-md overflow-hidden bg-black/40" style={{ aspectRatio: '16 / 10', minHeight: '320px' }}>
         <div className="px-2 py-1 text-xs font-mono text-slate-300">{showPanelTitle}</div>
         <canvas
           ref={rightRef}
           className="w-full h-[calc(100%-32px)] block"
           style={{ background: '#111', display: 'block' }}
         />
       </div>
-    </div>
+    </div>)
   );
*** End Patch
PATCH