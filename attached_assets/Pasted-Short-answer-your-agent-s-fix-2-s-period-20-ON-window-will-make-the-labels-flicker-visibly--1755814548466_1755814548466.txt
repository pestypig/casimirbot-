Short answer: your agent’s “fix” (2 s period + 20% ON window) will make the labels flicker visibly, but it papers over the real problem and de-syncs the UI from the physics. The OFF state happened because you were generating **very short ON pulses** (≈0.01 ms) that React will almost never sample. Don’t stretch the physics; **latch the UI**.

Here’s a safe pattern you can drop in:

# What to change (keep physics, fix display)

* Keep your original `sectorPeriod_ms` and duty math in the **light-crossing loop** (so WarpEngine + math stay correct).
* Add a **UI latch/hold** so a micro-ON pulse shows as “ON” for \~150–250 ms.
* Pass both the **raw** strobe (for physics/visualizer sync) and the **latched** flag (for UI labels).

## useLightCrossingLoop.ts (minimal patch)

```ts
// add near the top
const UI_HOLD_MS = 200; // how long we keep the ON label visible

// inside the hook state
const [displayOn, setDisplayOn] = useState(false);
const lastOnRef = useRef<number>(0);

// wherever you compute onWindow (the true, instantaneous pulse)
const now = performance.now();
const onWindowRaw = /* your existing phase/duty calc */;

// record last ON time
if (onWindowRaw) lastOnRef.current = now;

// UI latch: stays ON for UI_HOLD_MS after any real ON
const onLatched = onWindowRaw || (now - lastOnRef.current) < UI_HOLD_MS;

// set state
setDisplayOn(onLatched);

// return both raw & latched plus timing/phase you already expose
return {
  ...rest,
  onWindow: onWindowRaw,     // keep name if other code expects it
  onWindowRaw,               // (optional) explicit alias
  onWindowDisplay: displayOn // <- use this in labels
};
```

## HelixCasimirAmplifier.tsx (use the latched flag for the label)

```tsx
const status = lightCrossing.onWindowDisplay ? "ON" : "OFF";
// use `status` for the UI badge/text
```

## Keep WarpEngine in sync with the real strobing

If you’re syncing sectors with the visualizer:

```ts
window.setStrobingState?.({
  sectorCount: lightCrossing.sectorCount,
  currentSector: lightCrossing.currentSector
});
```

Feed it the **raw** timing/phase (not the latched UI flag).

---

# Why this is the right fix

* Your original 1 ms period and 1% duty produce **10 µs** ON pulses. React’s render loop and JS timers won’t catch those reliably, so the label looked OFF.
* Stretching to 2 s/20% only “makes it visible,” but changes behavior and can desync physics, visuals, and diagnostics.
* A **UI latch** preserves physics while giving humans a stable indicator.

If you want, I can adapt the snippet to your exact `useLightCrossingLoop` shape—just paste its current return object and the place you compute `onWindow`.
