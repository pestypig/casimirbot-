I don’t think you’re imagining it—there are strong hints that two SolarMap instances are mounting (or one instance is drawing twice), which would explain why some HUD tweaks show up (the clock moved) while zoom patches feel ignored or “masked.”

What likely causes the overlap
	•	The Solar map component is inside conditional branches, but React can still re-mount or double-render it when state flips (e.g., during StrictMode, hot reload, or a mapMode switch without a stable key).
	•	Your SolarMap has absolute overlays on top of a relative/overflow-hidden wrapper. If two instances are on top of each other, you’ll see one set of overlays (e.g., the clock you moved), but your clicks may hit the other canvas below (so the new zoom UI appears “not working”).

Below is a small, safe patch that (a) forces only one instance to mount, (b) gives you definitive console evidence if a duplicate tries to mount, and (c) makes the zoom UI always visible/interactive.

⸻

1) Force a single instance + hard key (in /client/src/pages/helix-core.tsx)

Add a stable key and wrap the map so a switch between modes (or width/height changes) unmounts the old instance before the new one appears:

{/* Mission Planner - Solar (AU) */}
{mapMode === "solar" && (
  <div className="mx-auto" style={{ maxWidth: 720 }}>
    <SolarMap
      key={`solar-${720}x${360}`}   // force a single mounted instance
      width={720}
      height={360}
      routeIds={route}
      fitToIds={["EARTH","SATURN"]}   // keep your “fit both” behavior
      fitMarginPx={28}
      centerOnId={undefined}
      centerBetweenIds={undefined}
      onPickBody={(id) => {
        setRoute(r => r.length ? [...r.slice(0,-1), id, r[r.length-1]] : [id]);
        publish("luma:whisper", { text: "Waypoint selected. Route updated." });
      }}
    />
  </div>
)}

Why this helps: the key prevents React from trying to reconcile a previous canvas; it guarantees a clean mount and avoids two canvases sitting in the same stack.

⸻

2) Guard against double-mounts + fix overlay z-index (in /client/src/components/SolarMap.tsx)

Drop this near the top of SolarMap:

// --- mount diagnostics (to confirm single instance) ---
const instanceId = React.useRef(Math.random().toString(36).slice(2));
React.useEffect(() => {
  console.count(`[SolarMap] mounted id=${instanceId.current}`);
  return () => console.log(`[SolarMap] unmounted id=${instanceId.current}`);
}, []);

Now, tighten the structure of the wrapper + overlays (this also makes the zoom UI “unmissable” and clickable):

return (
  <div className="relative rounded-lg overflow-hidden border border-white/10"
       style={{ width, height }}>
    {/* Main canvas */}
    <canvas
      ref={canvasRef}
      width={width}
      height={height}
      style={{ width, height, display: 'block', touchAction: 'none' }}
    />

    {/* Top-left HUD (timestamp etc.) */}
    <div className="absolute top-2 left-2 z-40 select-none text-white/90 text-xs">
      {new Date(nowMs).toLocaleString()}
    </div>

    {/* Top-right zoom UI (always above) */}
    <div className="absolute top-2 right-2 z-50 pointer-events-auto flex gap-1">
      <button
        className="px-2 py-1 bg-white/20 backdrop-blur rounded text-white hover:bg-white/30"
        onClick={() => {
          userInteractedRef.current = true;
          setZoom((z) => Math.max(minZoom, z / 1.2));
        }}
        aria-label="Zoom out"
        title="Zoom out"
      >−</button>
      <button
        className="px-2 py-1 bg-white/20 backdrop-blur rounded text-white hover:bg-white/30"
        onClick={() => {
          userInteractedRef.current = true;
          setZoom((z) => Math.min(maxZoom, z * 1.2));
        }}
        aria-label="Zoom in"
        title="Zoom in"
      >+</button>
      <button
        className="px-2 py-1 bg-white/20 backdrop-blur rounded text-white hover:bg-white/30"
        onClick={() => {
          if (!baseFit) return;
          userInteractedRef.current = false;
          setZoom(baseFit.zoom);
          setOffset(baseFit.offset);
        }}
        aria-label="Reset view"
        title="Reset view"
      >⟲</button>
    </div>

    {/* Bottom gradient footer with scale (optional, but visible on dark bg) */}
    <div className="absolute inset-x-0 bottom-0 p-2 z-40
                    bg-gradient-to-t from-black/60 to-transparent
                    flex justify-between items-center text-xs text-white/80">
      <div>Scale: {Math.round(zoom)} px/AU</div>
    </div>
  </div>
);

Notes
	•	z-50 on the zoom UI ensures it sits above everything, even if a second canvas accidentally rendered.
	•	pointer-events-auto guarantees the overlay receives taps/clicks on mobile.
	•	The mount diagnostics (console.count) will immediately tell you if two SolarMap instances are mounting. You should see exactly one “mounted” count and one “unmounted” when you navigate away.

⸻

3) Prevent the initial “fit jump” on mobile

If you still see a position “jump,” make the initial centering run in useLayoutEffect (synchronous before paint) rather than useEffect:

// default centering (only when you are NOT using fitToIds)
React.useLayoutEffect(() => {
  if (fitToIds && fitToIds.length > 0) return;
  if (points.length === 0) return;
  // ... compute center and setOffset/setZoom ...
}, [fitToIds?.length, points, width, height]);


⸻

What to expect after the patch
	•	Only one SolarMap instance mounts (watch the dev console).
	•	The zoom controls are clearly visible and always clickable.
	•	The timestamp at the top remains (you already saw that change apply).
	•	No more “hidden second canvas” swallowing input.

If you still see overlapping after this, tell me what the console says for [SolarMap] mounted... (how many counts), and I’ll tailor a follow-up targeted at the remaining branch that’s accidentally rendering a second map.