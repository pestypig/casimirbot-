2) Use FR duty in REAL, UI duty in SHOW

Your resolveThetaScale() prefers dutyEffectiveFR if present, which makes both panes almost identical across modes. Expose a simple switch so the REAL pane uses FR-duty, but SHOW uses the UI duty for clear visual separation.

Patch (WarpBubbleCompare): add a duty selector knob and honor it.

// A) Add an optional hint to choose duty source
type DutySource = 'fr' | 'ui';
function resolveThetaScale(p: any, dutySource: DutySource = 'fr') {
  if (Number.isFinite(p?.thetaScale)) return Number(p.thetaScale);

  const gammaGeo = Number(p?.gammaGeo ?? p?.g_y ?? 26);
  const qSpoil   = Number(p?.qSpoilingFactor ?? p?.deltaAOverA ?? 1);
  const gammaVdB = Number(p?.gammaVdB ?? p?.gammaVanDenBroeck ?? 2.86e5);

  // choose duty
  let duty = Number(p?.dutyCycle ?? 0.14);            // UI duty (visible)
  if (dutySource === 'fr') {
    if (Number.isFinite(p?.dutyEffectiveFR)) duty = Number(p.dutyEffectiveFR);
    else if (Number.isFinite(p?.dutyEffective_FR)) duty = Number(p.dutyEffective_FR);
    else if (p?.lightCrossing && Number.isFinite(p.lightCrossing.burst_ms) &&
             Number.isFinite(p.lightCrossing.dwell_ms) && p.lightCrossing.dwell_ms > 0) {
      duty = p.lightCrossing.burst_ms / p.lightCrossing.dwell_ms / Math.max(1, (p.sectorCount ?? p.sectors ?? 1));
    }
  }

  // IMPORTANT: use total sectors for averaging, not concurrent strobing
  const sectors  = Math.max(1, Number(p?.sectorCount ?? p?.sectors ?? 400));
  const viewAvg  = (p?.viewAvg ?? true) ? 1 : 0;
  const A_geo    = Math.pow(Math.max(1, gammaGeo), 3);
  const dutyTerm = viewAvg ? Math.sqrt(Math.max(1e-12, duty / sectors)) : 1;
  return A_geo * Math.max(1e-12, qSpoil) * Math.max(1, gammaVdB) * dutyTerm;
}

// B) Thread the dutySource through physicsPayload
function physicsPayload(p: any, dutySource: DutySource = 'fr') {
  return {
    thetaScale: resolveThetaScale(p, dutySource),
    dutyCycle: Number(p?.dutyCycle ?? 0.14),
    sectors: Math.max(1, Number(p?.sectorCount ?? p?.sectors ?? 400)), // total
    sectorCount: Math.max(1, Number(p?.sectorCount ?? 400)),
    viewAvg: p?.viewAvg ?? true,
    gammaGeo: Number(p?.gammaGeo ?? p?.g_y ?? 26),
    deltaAOverA: Number(p?.qSpoilingFactor ?? p?.deltaAOverA ?? 1),
    gammaVdB: Number(p?.gammaVdB ?? p?.gammaVanDenBroeck ?? 2.86e5),
  };
}


Use it like this:

// In bootstrap + live update:
// REAL (parity): FR duty (conservative)
const parityPhys = physicsPayload(parityParams, 'fr');
// SHOW (boosted): UI duty (visibly mode-dependent)
const showPhys   = physicsPayload(showParams, 'ui');

pushUniformsWhenReady(leftEngine.current,  parityPhys);
pushUniformsWhenReady(rightEngine.current, showPhys);
