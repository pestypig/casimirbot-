Below is a **drop‑in wiring** to make the REAL/SHOW panel titles in `WarpBubbleCompare.tsx` show **live pipeline values** (power/mass/zeta) instead of any stale/hardcoded numbers. It’s defensive to different live shapes and falls back to config targets with correct units.

---

## 1) Imports (top of `WarpBubbleCompare.tsx`)

```tsx
// add
import { useEnergyPipeline } from "@/hooks/use-energy-pipeline";
```

---

## 2) Helpers (place near other local helpers in the file)

```tsx
// Modes we expose in UI
 type ModeKey = "hover" | "cruise" | "emergency" | "standby";

// Safe unit formatting for either live MW or config W
const formatPower = (P_MW?: number, P_W?: number) => {
  if (Number.isFinite(P_MW as number)) return `${(P_MW as number).toFixed(1)} MW`;
  if (Number.isFinite(P_W as number)) {
    const w = P_W as number;
    if (w >= 1e6) return `${(w / 1e6).toFixed(1)} MW`;
    if (w >= 1e3) return `${(w / 1e3).toFixed(1)} kW`;
    return `${w.toFixed(1)} W`;
  }
  return "—";
};

// Build a live subtitle for a mode (power • mass • zeta)
const buildLiveDesc = (
  snap?: { P_avg_MW?: number; M_exotic_kg?: number; zeta?: number },
  cfg?: { powerTarget_W?: number }
) => {
  const P = formatPower(snap?.P_avg_MW, cfg?.powerTarget_W);
  const M = Number.isFinite(snap?.M_exotic_kg) ? `${snap!.M_exotic_kg!.toFixed(0)} kg` : "— kg";
  const Z = Number.isFinite(snap?.zeta) ? `ζ=${snap!.zeta!.toFixed(3)}` : "ζ=—";
  return `${P} • ${M} • ${Z}`;
};
```

---

## 3) Inside the component body

Add this **once** inside the `WarpBubbleCompare` component (with refs/engines), before your JSX `return`:

```tsx
  // Live pipeline snapshot (same hook used by Energy Control panel)
  const live = useEnergyPipeline();

  // tolerant extraction – supports live.byMode, live.modes, or flat legacy shapes
  const liveForMode = (key: ModeKey) =>
    (live?.byMode && live.byMode[key]) ||
    (live?.modes && live.modes[key]) ||
    (live && (live as any)[key]) || null;

  // current UI mode key (fallback to 'hover')
  const currentModeKey = ((live?.currentMode as ModeKey) || "hover") as ModeKey;

  // optional: read UI configs if present on window; safe fallback to empty
  const modeCfgs: Record<string, { name?: string; powerTarget_W?: number }> =
    (typeof window !== "undefined" && (window as any).MODE_CONFIGS) || {};

  const currentSnap = liveForMode(currentModeKey);
  const currentCfg = modeCfgs[currentModeKey];
  const currentSubtitle = buildLiveDesc(currentSnap, currentCfg);

  // Titles for the two panels
  const realPanelTitle = `REAL • ${currentSubtitle}`;   // parity/FR view
  const showPanelTitle = `SHOW • ${currentSubtitle}`;   // boosted/UI view
```

> If your component already keeps an internal `mode` state separate from the pipeline, replace `currentModeKey` with that state as needed, but \*\*still pull values from \*\*\`\` so titles are truly live.

---

## 4) Use the titles in your JSX

Wherever you render the side‑by‑side panels, replace the static titles (e.g., `"REAL"` / `"SHOW"`) with the computed strings:

```tsx
{/* BEFORE */}
{/* <Panel title="REAL"> ... */}
{/* <Panel title="SHOW"> ... */}

{/* AFTER */}
<Panel title={realPanelTitle}>
  {/* REAL canvas & controls */}
</Panel>
<Panel title={showPanelTitle}>
  {/* SHOW canvas & controls */}
</Panel>
```

If you don’t have a `Panel` component and instead use a custom header, drop `currentSubtitle` right under your existing labels:

```tsx
<div className="flex items-center justify-between">
  <h3 className="font-semibold">REAL</h3>
  <span className="text-xs text-muted-foreground">{currentSubtitle}</span>
</div>
```

---

## 5) Optional: show **all modes** with their live values

If you have a header bar or tab row and want each mode to show its own live number (not only the active one):

```tsx
const modeKeys: ModeKey[] = ["hover", "cruise", "emergency", "standby"];
const modeBadges = modeKeys.map((k) => {
  const snap = liveForMode(k);
  const cfg = modeCfgs[k];
  return (
    <div key={k} className="px-2 py-1 rounded-full bg-muted text-xs">
      <span className="font-medium capitalize">{k}</span>
      <span className="opacity-70"> — {buildLiveDesc(snap, cfg)}</span>
    </div>
  );
});
```

Then render `{modeBadges}` in your header area.

---

## 6) Notes & guarantees

* **Live‑first:** Uses `P_avg_MW` etc. from the pipeline when available for *every* mode; falls back to config `powerTarget_W` with correct units (W/kW/MW) when live absent.
* **No stale 7.4 W/MW confusion:** Unit formatting prevents mislabeling; Cruise will show `83.3 MW` live when your pipeline publishes it.
* **No coupling to engines:** This only touches titles/labels. Your REAL/SHOW engines keep using their existing uniform updates.
* **Defensive:** Won’t throw if the pipeline object shape changes slightly.

That’s it—splice the snippets into `WarpBubbleCompare.tsx` and replace the two hardcoded titles with `realPanelTitle` / `showPanelTitle`. If you want me to target exact lines for your file, paste the header section of the component and I’ll return a pinpoint diff.
