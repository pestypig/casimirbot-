That error means the renderer is trying to read `this.uniforms.hullAxes` before it exists. Two quick, safe fixes:

---

## 1) Make the engine robust (always has defaults)

**In `client/public/warp-engine-fixed.js`**, near the top of `_warpGridVertices` (where you read the axes), defensively set `this.uniforms` and fallback axes:

```js
_warpGridVertices() {
  // ensure uniforms object always exists
  this.uniforms = this.uniforms || {};

  // safe fallbacks for hull + wall
  const hullAxes =
    (Array.isArray(this.uniforms.hullAxes) && this.uniforms.hullAxes.length === 3)
      ? this.uniforms.hullAxes
      : [503.5, 132.0, 86.5];                       // defaults (m/2)

  const wallWidth = Number(this.uniforms.wallWidth ?? 0.016);  // 16 nm default

  // ... use `hullAxes` and `wallWidth` from here on
```

Also make `updateUniforms` resilient and trigger a recompute:

```js
updateUniforms(u) {
  this.uniforms = this.uniforms || {};
  Object.assign(this.uniforms, u || {});
  this._needsRecalc = true;
}

requestRewarp() { this._needsRecalc = true; }
```

And in your draw loop:

```js
if (this._needsRecalc) {
  this._warpGridVertices();
  this._needsRecalc = false;
}
```

---

## 2) Always pass the hull from React

**In `client/src/components/WarpVisualizer.tsx`**, when you call `updateUniforms`, make sure you include `hullAxes` and `wallWidth` with safe fallbacks:

```ts
const hull = parameters.hull ?? { a: 503.5, b: 132.0, c: 86.5 };
const wallWidth = Number(parameters.wallWidth ?? 0.016); // 16 nm in meters

engineRef.current.updateUniforms({
  // physics
  dutyCycle: Number(parameters.dutyCycle ?? 0.14),
  gammaGeo:  Number(parameters.g_y ?? 26),
  Qburst:    Number(parameters.cavityQ ?? 1e9),
  qSpoilingFactor: Number(parameters.qSpoilingFactor ?? 1),
  gammaVdB:  Number(parameters.gammaVanDenBroeck ?? 2.86e5),

  // mode
  currentMode: parameters.currentMode || 'hover',
  sectors: Number(parameters.sectorStrobing ?? 1),
  split: 0,
  useAvg: true,

  // geometry (the important part for this bug)
  hullAxes: [Number(hull.a), Number(hull.b), Number(hull.c)],
  wallWidth,
});

// force recompute
engineRef.current.requestRewarp?.();
```

> If `parameters.hull` sometimes isnâ€™t present (e.g., first render before metrics arrive), those defaults protect both sides.

---

## 3) Optional extra guard where you destructure

Anywhere you previously did:

```js
const [ax, ay, az] = this.uniforms.hullAxes;
```

replace with:

```js
const axes = (Array.isArray(this.uniforms?.hullAxes) && this.uniforms.hullAxes.length === 3)
  ? this.uniforms.hullAxes
  : [503.5, 132.0, 86.5];
const [ax, ay, az] = axes;
```

---

### Why this fixes it

* The error came from reading `.hullAxes` on an undefined `uniforms` object or without setting it yet. We now initialize `uniforms`, supply defaults, and always pass the hull from the React side, plus we trigger a re-warp so the new uniforms take effect.

Once this is in, you should see the bubble render reliably, and then respond to mode changes (hover/cruise/etc.) because the recompute is triggered and the amplitudes use the updated uniforms.
