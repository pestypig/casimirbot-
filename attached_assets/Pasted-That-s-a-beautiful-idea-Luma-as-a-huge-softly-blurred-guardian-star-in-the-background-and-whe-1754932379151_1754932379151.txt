That’s a beautiful idea: Luma as a huge, softly–blurred guardian star in the **background**, and when she “speaks” a **small PNG badge** pops in with a smooth type-on line. You’ll get the cosmic vibe without stealing focus—or frames.

Here’s a plug-in plan + code you can hand to Replit:

---

# 1) Full-screen background Luma (GLB, hover anim, blurred/low-opacity)

```tsx
// components/BackgroundLuma.tsx
import * as React from "react";
import { Canvas, useFrame } from "@react-three/fiber";
import { Html, useGLTF, useAnimations } from "@react-three/drei";
import * as THREE from "three";

type Props = {
  glbUrl?: string;           // "/luma/Butler.glb"
  opacity?: number;          // 0.12–0.25 feels right
  blurPx?: number;           // 4–10px (CSS filter)
  paused?: boolean;          // allow toggling
};

function LumaModel({ url, paused }: { url: string; paused?: boolean }) {
  const { scene, animations } = useGLTF(url);
  const { actions, names } = useAnimations(animations, scene);
  const root = React.useRef<THREE.Group>(null!);

  // Normalize size + center
  React.useEffect(() => {
    scene.traverse(o => {
      // lighten the shader so blur + low opacity still reads
      const m = (o as any).material;
      if (m && m.isMaterial) {
        m.emissive = new THREE.Color("#ffe89b");
        m.emissiveIntensity = 0.6;
        m.roughness = 0.5;
        m.metalness = 0.0;
      }
    });
    const box = new THREE.Box3().setFromObject(scene);
    const size = new THREE.Vector3(); box.getSize(size);
    const s = 8 / Math.max(size.x, size.y, size.z || 1); // big, but background
    scene.scale.setScalar(s);
    const c = new THREE.Vector3(); box.getCenter(c);
    scene.position.sub(c);
  }, [scene]);

  // Try to play a baked “Hover/Idle” clip if present; fall back to procedural bob
  React.useEffect(() => {
    const hoverName =
      names.find(n => /hover|idle/i.test(n)) ?? names[0];
    const act = hoverName ? actions[hoverName] : undefined;
    if (act) { act.reset().fadeIn(0.3).play(); }
    return () => { if (act) act.fadeOut(0.3); };
  }, [actions, names]);

  useFrame(({ clock }) => {
    if (paused) return;
    const t = clock.getElapsedTime();
    // gentle drift even if no clip
    const y = Math.sin(t * 0.5) * 0.35;
    const r = Math.sin(t * 0.2) * 0.05;
    scene.position.y = y;
    scene.rotation.y = r;
  });

  return <group ref={root}><primitive object={scene} /></group>;
}

export function BackgroundLuma({
  glbUrl = "/luma/Butler.glb",
  opacity = 0.18,
  blurPx = 6,
  paused = false
}: Props) {
  // Pause when tab hidden (perf)
  const [visPaused, setVisPaused] = React.useState(false);
  React.useEffect(() => {
    const h = () => setVisPaused(document.hidden);
    document.addEventListener("visibilitychange", h);
    return () => document.removeEventListener("visibilitychange", h);
  }, []);

  return (
    <div
      className="fixed inset-0 -z-10 pointer-events-none"
      style={{ filter: `blur(${blurPx}px)`, opacity }}
    >
      <Canvas
        camera={{ position: [0, 0, 16], fov: 35 }}
        dpr={[1, 1.5]}
        gl={{ antialias: true, powerPreference: "low-power" }}
        onCreated={({ gl }) => gl.setClearColor("#000000", 0)} // transparent under UI
        frameloop="always"
      >
        <ambientLight intensity={0.8} />
        <directionalLight position={[6, 8, 10]} intensity={1.1} />
        <BackgroundStars />
        <React.Suspense fallback={<CenteredHint />}>
          <LumaModel url={glbUrl} paused={paused || visPaused} />
        </React.Suspense>
      </Canvas>
    </div>
  );
}

function CenteredHint() {
  return <Html center><div className="text-xs text-slate-400">Loading Luma…</div></Html>;
}

function BackgroundStars() {
  // ultra-cheap star field to sell “cosmic” scale under blur
  const geo = React.useMemo(() => new THREE.BufferGeometry(), []);
  const mat = React.useMemo(() => new THREE.PointsMaterial({ size: 0.05, color: "#ffffff", transparent: true, opacity: 0.6 }), []);
  React.useEffect(() => {
    const N = 1200;
    const pos = new Float32Array(N * 3);
    for (let i = 0; i < N; i++) {
      const r = 40 + Math.random() * 60;
      const th = Math.random() * Math.PI * 2;
      const ph = Math.acos(2*Math.random()-1);
      pos[i*3+0] = r * Math.sin(ph) * Math.cos(th);
      pos[i*3+1] = r * Math.sin(ph) * Math.sin(th);
      pos[i*3+2] = r * Math.cos(ph);
    }
    geo.setAttribute("position", new THREE.BufferAttribute(pos, 3));
  }, [geo]);
  return <points args={[geo, mat]} />;
}
```

**What it does**

* Renders a **full-screen, transparent** canvas behind your UI.
* Loads your **GLB**, plays any `Hover/Idle` clip if found; otherwise it gently bobs/rotates.
* **Blur + opacity** are CSS on the canvas, so UI stays crisp.
* Pauses when tab is hidden; low DPR caps; tiny star field for depth.

---

# 2) Luma “whisper”—PNG badge with type-on text

```tsx
// components/LumaWhisper.tsx
import * as React from "react";

export function LumaWhisper({
  icon="/luma/Luma_29.png",
  text,
  onDone,
  msPerChar=18,
  stayMs=2200,
}:{
  icon?: string;
  text: string;
  onDone?: ()=>void;
  msPerChar?: number;
  stayMs?: number;
}) {
  const [shown, setShown] = React.useState("");
  React.useEffect(()=>{
    let i = 0;
    const id = setInterval(()=>{
      i++; setShown(text.slice(0,i));
      if (i >= text.length) { clearInterval(id); setTimeout(()=>onDone?.(), stayMs); }
    }, msPerChar);
    return ()=>clearInterval(id);
  }, [text, msPerChar, stayMs, onDone]);

  return (
    <div className="fixed bottom-5 right-5 z-40 flex items-center gap-3 px-3 py-2 rounded-2xl border bg-slate-950/85 border-slate-700 backdrop-blur shadow-lg">
      <img src={icon} alt="Luma" className="w-8 h-8 drop-shadow" />
      <p className="text-sm text-slate-100 leading-snug">
        {shown}
        <span className="inline-block w-[6px] animate-pulse">▌</span>
      </p>
    </div>
  );
}
```

You can trigger it from your existing Luma bus:

```ts
// somewhere in UI logic
import { LumaWhisper } from "@/components/LumaWhisper";
import { publish, subscribe, unsubscribe } from "@/lib/luma-bus";

// render once at app root:
function LumaOverlayHost() {
  const [msg, setMsg] = React.useState<string | null>(null);
  React.useEffect(()=>{
    const id = subscribe("luma:whisper", (p:any)=> setMsg(p.text));
    return ()=>unsubscribe(id);
  }, []);
  if (!msg) return null;
  return <LumaWhisper text={msg} onDone={()=>setMsg(null)} />;
}

// trigger:
publish("luma:whisper", { text: "Timing matched. Take the interval; apply thrust." });
```

---

## Animation cycles from Luma’s Workshop

If your `.glb` includes named clips (e.g., `Idle`, `Breathe`, `Hover`), the `useAnimations` bit will pick them up automatically; we look for `/hover|idle/i`. If you add more (e.g., `Nod`, `Point`), we can map UI events to play/transition those with `mixer.clipAction("Nod").reset().fadeIn(0.15).play()` and `fadeOut()`.

---

## Performance guardrails

* Canvas is **behind** the UI (`-z-10`) and **pointer-events: none**—it never blocks clicks.
* DPR capped to **1.5**; `powerPreference: 'low-power'`.
* Pause on `visibilitychange`.
* Keep the model low-poly if possible; if it’s heavy, decimate or switch to the emissive fallback.
* If users enable *comet* style later, implement it only for the **tiny avatar**, not the background.

---

## Tone (Cortana-meets-Zen)

Keep replies short and useful. Samples you can seed into your server prompt:

* “Timing matched. Take the interval; apply thrust.”
* “Form first. Speed follows.”
* “Breathe once. Choose the useful distance.”
* “Meet change with correct posture. The rest aligns.”

---

### How to wire it in now

1. Put your `Butler.glb` at `/public/luma/Butler.glb` and the PNG at `/public/luma/Luma_29.png`.
2. Render `<BackgroundLuma />` at your app root (so it sits under everything).
3. Render a single `<LumaOverlayHost />` somewhere high; use `publish("luma:whisper",{text})` from interactions.
4. Later, you can still keep the chat panel version of Luma for deeper help.

If you want, drop your `.glb` size here and I’ll advise the fastest Blender export flags (decimate %, remove tangents, merge materials) so it stays butter-smooth.
