4) Pass the full hull and the light-crossing state to the visualizer, along with the FR-effective duty

In the WarpVisualizer props builder, replace the block that builds vizParams with this:

<WarpVisualizer
  key={`mode-${effectiveMode}-v${modeVersion}-parity-${localStorage.getItem('physics-parity-mode')}`}
  parameters={(() => {
    const num = (v: unknown) => (typeof v === "number" && Number.isFinite(v) ? v : undefined);

    const vizParams: any = {
      currentMode: effectiveMode,
      // â¬‡ï¸ use the resolved sectors (metrics wins)
      sectorStrobing: sectorsResolved,

      // ðŸ”‘ physics parity & cosmetics (neutral by default; engine handles parity correctly)
      physicsParityMode: localStorage.getItem("physics-parity-mode") === "true",
      cosmeticLevel,

      // ðŸ”§ geometry â€” pass the full live hull object (includes Lx/Ly/Lz and a/b/c)
      hull,

      wallWidth_m: 6.0,
      epsilonTilt: systemMetrics?.shiftVector?.epsilonTilt ?? epsilonTilt,
      betaTiltVec: (systemMetrics?.shiftVector?.betaTiltVec ?? [0, -1, 0]) as [number, number, number],

      gridScale: 1.6,

      // ðŸ§  pipeline timing + FR window (authoritative)
      dutyEffectiveFR,
      lightCrossing: lc,

      // visual curvature knobs set neutral; engine can boost if parity off
      curvatureBoostMax: 1,
      curvatureGainDec: 0,
    };

    // Only pass numeric pipeline fields when present (no magic defaults)
    const maybe = {
      dutyCycle:        num(pipeline?.dutyCycle),
      g_y:              num(pipeline?.gammaGeo),
      cavityQ:          num(pipeline?.qCavity),
      sagDepth_nm:      num(pipeline?.sagDepth_nm),
      tsRatio:          num(pipeline?.TS_ratio),
      powerAvg_MW:      num(pipeline?.P_avg),
      exoticMass_kg:    num(pipeline?.M_exotic),
      qSpoilingFactor:  num(pipeline?.qSpoilingFactor),
      gammaVanDenBroeck:num(pipeline?.gammaVanDenBroeck),
    };
    for (const k of Object.keys(maybe) as (keyof typeof maybe)[]) {
      if (maybe[k] !== undefined) vizParams[k] = maybe[k];
    }

    return vizParams;
  })()}
/>