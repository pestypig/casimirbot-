Below is a self‐contained snippet you can drop into your React/TypeScript code so that **every** UI lever maps directly to the parameters feeding your `viability(...)` engine and thus to the phase‐diagram grid:

```ts
// types.ts
export interface PipelineParams {
  // geometry & static Casimir
  gap:      number;    // a [m]
  A_tile:   number;    // tile area [m²]
  // Van‐den‐Broeck geometric amp
  gamma_geo: number;   // γ_geo
  // dynamic circuit
  Q:        number;    // cavity quality factor
  duty:     number;    // t_burst/t_cycle
  duty_eff: number;    // duty/S
  // lattice
  N_tiles:  number;    // total # of tiles
  P_raw:    number;    // raw lattice power [W]
}

export interface ConstraintConfig {
  massNominal: number; // 1400 [kg]
  massTolPct:  number; // e.g. 5 (%)
  maxPower:    number; // e.g. 83 [MW]
  maxZeta:     number; // e.g. 1.0
  minGamma:    number; // e.g. 25
}
```

```tsx
// In your top‐level App or Home component:
const [tileAreaCm2, setTileAreaCm2] = useState(25);  // slider: 1–100 cm²
const [shipRadius, setShipRadius]   = useState(5.0); // slider: 1–30 m

// Natário levers:
const [sagDepth,  setSagDepth]  = useState(16);      // nm slider
const [gammaGeo,  setGammaGeo]  = useState(25);      // computed or slider
const [Qfactor,   setQfactor]   = useState(1e9);     // slider: 1e8–1e10
const [duty,      setDuty]      = useState(0.01);    // slider: 0.001–0.1
const [sectors,   setSectors]   = useState(400);     // slider: 100–1000

// Constraint levers:
const [massTolPct, setMassTolPct] = useState(5);     // slider: 1–50 %
const [maxPower,   setMaxPower]   = useState(83);    // slider: 10–200 MW
const [maxZeta,    setMaxZeta]    = useState(1.0);   // slider: 0.1–2.0
const [minGamma,   setMinGamma]   = useState(25);    // slider: 1–50

// Derived pipeline params
const pipe: PipelineParams = {
  gap:       sagDepth * 1e-9,                          // nm → m
  A_tile:    tileAreaCm2 * 1e-4,                       // cm² → m²
  gamma_geo: gammaGeo,                                
  Q:         Qfactor,
  duty:      duty,
  duty_eff:  duty / sectors,
  N_tiles:   (4 * Math.PI * shipRadius * shipRadius) / (tileAreaCm2 * 1e-4),
  P_raw:     2e15                                     // 2 PW
};

// Derived constraint config
const cons: ConstraintConfig = {
  massNominal: 1400,
  massTolPct:  massTolPct,
  maxPower:    maxPower,
  maxZeta:     maxZeta,
  minGamma:    minGamma
};

// Pass these into your PhaseDiagram:
<PhaseDiagram
  pipeParams={pipe}
  consConfig={cons}
  // plus slider callbacks:
  tileAreaCm2={tileAreaCm2}
  onTileAreaChange={setTileAreaCm2}
  shipRadius={shipRadius}
  onShipRadiusChange={setShipRadius}
  // etc for sagDepth, gammaGeo, Qfactor, duty, sectors,
  // and the four constraint sliders
/>
```

Then in **PhaseDiagram.tsx**, your `buildGrid()` looks like:

```ts
function buildGrid(pipe: PipelineParams, cons: ConstraintConfig) {
  const A_vals = [...]; // 1 → 100 cm²
  const R_vals = [...]; // 1 → 30 m
  const Z = R_vals.map(r =>
    A_vals.map(aCm2 => {
      const meta = viability(aCm2, r, pipe, cons);
      return meta.ok ? 1 : 0;
    })
  );
  return { A_vals, R_vals, Z };
}

// Rebuild whenever any lever changes:
useEffect(() => {
  const grid = buildGrid(pipeParams, consConfig);
  setGrid(grid);
}, [
  pipeParams.gap, pipeParams.A_tile, pipeParams.gamma_geo,
  pipeParams.Q, pipeParams.duty, pipeParams.duty_eff,
  pipeParams.N_tiles,
  consConfig.massTolPct, consConfig.maxPower,
  consConfig.maxZeta, consConfig.minGamma
]);
```

**Equations summary** (run inside `viability()`):

1.  E_static = −(π² ħc A_tile)/(720 a³)/2  
2.  U_geo = γ_geo³ E_static  
3.  U_Q = Q U_geo  
4.  U_cycle = d U_Q  
5.  U_avg_total = d_eff U_Q  
6.  m_exotic = |U_avg_total N_tiles|/c²  
7.  P_avg = P_raw d  
8.  ζ = (…your QI formula…)  

Constraint gates:

- massOK = minM ≤ m_exotic ≤ maxM  
- powerOK = P_avg ≤ maxPower × 10⁶  
- zetaOK = ζ ≤ maxZeta  
- gammaOK = γ_geo ≥ minGamma  

Return `ok = massOK && powerOK && zetaOK && gammaOK`. With every lever wired this way, dragging any slider will immediately reshape your heat‐map’s green zone in perfect lock‐step with the live diagnostics.