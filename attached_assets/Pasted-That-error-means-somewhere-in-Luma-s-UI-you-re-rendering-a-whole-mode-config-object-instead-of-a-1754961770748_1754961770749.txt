That error means somewhere in Luma’s UI you’re **rendering a whole mode config object** instead of a string/number. The keys in the error (`name, duty, sectors, qSpoiling, pocketGamma, description`) match your `MODE_CONFIGS[*]`. So `mode` (or `currentMode`) got set to the **config object** rather than the **mode id/name**.

## Quick fix (2 small patches)

### 1) Normalize the snapshot you publish

Where you build/broadcast the pipeline snapshot (in `use-energy-pipeline` or `LiveEnergyPipeline`), do **not** put the object in `mode`. Put both an id and a label.

```ts
// before: currentMode: mode   // <-- sometimes an object
// after:
const cfg = MODE_CONFIGS[newMode]; // newMode like "hover"
const snapshot = {
  currentModeId: String(newMode).toLowerCase(),
  currentModeName: cfg?.name ?? String(newMode),
  dutyCycle: cfg?.duty ?? duty,
  P_avg: P_total_realistic,
  zeta,
  TS_ratio,
  M_exotic: M_exotic_total,
  updatedAt: Date.now()
};

// write + broadcast this snapshot (setQueryData / pushPipelineSnapshot)
```

Update your `PipelineSnapshot` type accordingly.

### 2) Guard in the Luma panel (so it can’t crash)

In `LumaPanel` (or wherever you render), don’t render raw `s.mode`. Use the normalized fields; and add a defensive fallback:

```tsx
const modeLabel =
  typeof s?.currentModeName === "string"
    ? s.currentModeName
    : typeof (s as any)?.currentMode === "string"
    ? (s as any).currentMode
    : "[mode]";

<div className="text-sm leading-6">
  <div>{modeLabel} • Duty {(s.dutyCycle*100).toFixed(1)}%</div>
  <div>ζ = {s.zeta.toFixed(3)} • TS ≈ {s.TS_ratio.toFixed(0)}</div>
  <div>Power {s.P_avg.toFixed(1)} MW • Mass {s.M_exotic >= 1000 ? (s.M_exotic/1000).toFixed(1)+" t" : s.M_exotic.toFixed(0)+" kg"}</div>
</div>
```

## Also check these two spots

* Any `emit(LumaEvt.MODE_CHANGED, { mode })` calls—make sure `mode` is a **string id** (e.g., `"hover"`), not `MODE_CONFIGS[mode]`.
* Any toast builder (`zenLongToast`)—ensure you pass `mode: snapshot.currentModeId` or `currentModeName`, not the config object.

## Quick grep to find offenders

Ask your agent (or grep locally):

```
grep -R "MODE_CONFIGS" -n client/src | grep -E "emit|currentMode|pushPipeline|setQueryData|zenLongToast"
grep -R "currentMode[^INa-z]" -n client/src
```

Anywhere you see `currentMode:` receiving `MODE_CONFIGS[...]`, change it to `currentModeId`/`currentModeName` as above.

Do those two patches and the crash will disappear, plus Luma/Toasts will show the correct labels.
