{
  "version": 1,
  "rootId": "brick-lattice-dataflow-tree",
  "nodes": [
    {
      "id": "brick-lattice-dataflow-tree",
      "slug": "brick-lattice-dataflow-tree",
      "title": "Brick and Lattice Dataflow Tree",
      "excerpt": "Stress-energy, curvature, and lattice bricks from backend to UI.",
      "bodyMD": "This tree maps the brick dataflow used to transport stress-energy, curvature, and lattice volumes into visualization panels.\n\nMinimal artifact: brick-to-lattice dataflow map.",
      "tags": [
        "physics",
        "brick",
        "lattice",
        "dataflow"
      ],
      "children": [
        "brick-stress-energy",
        "brick-curvature",
        "brick-gr-evolve",
        "brick-gr-initial",
        "brick-brick-serialization",
        "brick-client-lattice",
        "brick-client-hooks",
        "brick-ui-panels",
        "brick-constraints-tests"
      ],
      "links": [],
      "summary": "Stress-energy, curvature, and lattice bricks from backend to UI.",
      "nodeType": "concept",
      "inputs": [],
      "outputs": [],
      "assumptions": [],
      "validity": {},
      "deterministic": null,
      "tolerance": null,
      "environment": null,
      "dependencies": [],
      "predictability": {
        "status": "partial",
        "missing": [
          "inputs",
          "outputs",
          "assumptions",
          "validity",
          "deterministic",
          "tolerance",
          "environment"
        ]
      },
      "evidence": [
        {
          "type": "doc",
          "path": "docs/knowledge/physics/brick-lattice-dataflow-tree.json",
          "repo_rev": "a993f4618e92989c20b05232addbc333ded95a29",
          "content_hash": "sha256:d929e3315d1aafbff04d4557e6988aed4e7f6004d8dbf14112c2803f66275d36"
        }
      ]
    },
    {
      "id": "brick-stress-energy",
      "slug": "brick-stress-energy",
      "title": "Stress-Energy Brick",
      "excerpt": "Stress-energy brick build and stats.",
      "bodyMD": "Stress-energy brick generation (server/stress-energy-brick.ts) feeds energy and GR pipelines.\n\nMinimal artifact: stress-energy brick schema and stats.",
      "tags": [
        "brick",
        "stress-energy",
        "physics"
      ],
      "children": [],
      "links": [
        {
          "rel": "parent",
          "to": "brick-lattice-dataflow-tree"
        }
      ],
      "summary": "Stress-energy brick build and stats.",
      "nodeType": "derived",
      "evidence": [
        {
          "type": "code",
          "path": "server/stress-energy-brick.ts",
          "repo_rev": "a993f4618e92989c20b05232addbc333ded95a29",
          "content_hash": "sha256:1a79a1ddd1873ecf5031860ddae0cd106448d9f46490bd92ac1d18b0da161f2e"
        },
        {
          "type": "test",
          "path": "tests/stress-energy-brick.spec.ts",
          "repo_rev": "a993f4618e92989c20b05232addbc333ded95a29",
          "content_hash": "sha256:5c33bb7b66d252d2f435603fefdf6bb13b87e4ce997390fc2f330a76148acd6e"
        }
      ],
      "inputs": [
        {
          "name": "dims",
          "unit": "voxels",
          "type": "tuple[int,int,int]",
          "source": "StressEnergyBrickParams.dims"
        },
        {
          "name": "bounds",
          "unit": "m",
          "type": "bbox",
          "source": "StressEnergyBrickParams.bounds"
        },
        {
          "name": "phase01",
          "unit": "1",
          "type": "float",
          "source": "pipeline:phase01"
        },
        {
          "name": "sigmaSector",
          "unit": "1",
          "type": "float",
          "source": "pipeline:sigmaSector"
        },
        {
          "name": "dutyFR",
          "unit": "1",
          "type": "float",
          "source": "pipeline:dutyFR"
        },
        {
          "name": "q",
          "unit": "1",
          "type": "float",
          "source": "pipeline:q"
        },
        {
          "name": "gammaGeo",
          "unit": "1",
          "type": "float",
          "source": "pipeline:gammaGeo"
        },
        {
          "name": "gammaVdB",
          "unit": "1",
          "type": "float",
          "source": "pipeline:gammaVdB"
        }
      ],
      "outputs": [
        {
          "name": "t00",
          "unit": "J/m^3",
          "type": "Float32Array"
        },
        {
          "name": "Sx",
          "unit": "J/m^3",
          "type": "Float32Array"
        },
        {
          "name": "Sy",
          "unit": "J/m^3",
          "type": "Float32Array"
        },
        {
          "name": "Sz",
          "unit": "J/m^3",
          "type": "Float32Array"
        },
        {
          "name": "totalEnergy_J",
          "unit": "J",
          "type": "float"
        }
      ],
      "assumptions": [
        "Brick grid is axis-aligned within bounds",
        "Stress-energy mapping uses pipeline snapshot"
      ],
      "validity": {
        "dims": {
          "min": 1
        },
        "dutyFR": {
          "min": 0,
          "max": 1
        }
      },
      "deterministic": true,
      "tolerance": null,
      "environment": {
        "runtime": "node"
      },
      "dependencies": [
        "brick-curvature"
      ],
      "predictability": {
        "status": "partial",
        "missing": [
          "tolerance"
        ]
      }
    },
    {
      "id": "brick-curvature",
      "slug": "brick-curvature",
      "title": "Curvature Brick",
      "excerpt": "Curvature brick build and serialization.",
      "bodyMD": "Curvature brick build/serialization (server/curvature-brick.ts) defines payloads for client visualization.\n\nMinimal artifact: curvature brick payload.",
      "tags": [
        "brick",
        "curvature",
        "physics"
      ],
      "children": [],
      "links": [
        {
          "rel": "parent",
          "to": "brick-lattice-dataflow-tree"
        }
      ],
      "summary": "Curvature brick build and serialization.",
      "nodeType": "derived",
      "evidence": [
        {
          "type": "code",
          "path": "server/curvature-brick.ts",
          "repo_rev": "a993f4618e92989c20b05232addbc333ded95a29",
          "content_hash": "sha256:e79416d2cfa49a366bbce49af964d9248502099d3af33126a5e1e0c5a7c9130a"
        }
      ],
      "inputs": [
        {
          "name": "dims",
          "unit": "voxels",
          "type": "tuple[int,int,int]",
          "source": "CurvBrickParams.dims"
        },
        {
          "name": "bounds",
          "unit": "m",
          "type": "bbox",
          "source": "CurvBrickParams.bounds"
        },
        {
          "name": "dutyFR",
          "unit": "1",
          "type": "float",
          "source": "CurvBrickParams.dutyFR"
        },
        {
          "name": "tauLC_s",
          "unit": "s",
          "type": "float",
          "source": "CurvBrickParams.tauLC_s"
        },
        {
          "name": "Tm_s",
          "unit": "s",
          "type": "float",
          "source": "CurvBrickParams.Tm_s"
        },
        {
          "name": "gammaGeo",
          "unit": "1",
          "type": "float",
          "source": "CurvBrickParams.gammaGeo"
        },
        {
          "name": "gammaVdB",
          "unit": "1",
          "type": "float",
          "source": "CurvBrickParams.gammaVdB"
        }
      ],
      "outputs": [
        {
          "name": "data",
          "unit": "1",
          "type": "Float32Array"
        },
        {
          "name": "qiMargin",
          "unit": "1",
          "type": "Float32Array"
        },
        {
          "name": "min",
          "unit": "1",
          "type": "float"
        },
        {
          "name": "max",
          "unit": "1",
          "type": "float"
        }
      ],
      "assumptions": [
        "Curvature brick derived from pipeline snapshot",
        "Natario wall scale and QI clamp applied"
      ],
      "validity": {
        "dims": {
          "min": 1
        },
        "dutyFR": {
          "min": 0,
          "max": 1
        }
      },
      "deterministic": true,
      "tolerance": null,
      "environment": {
        "runtime": "node"
      },
      "dependencies": [],
      "predictability": {
        "status": "partial",
        "missing": [
          "tolerance"
        ]
      }
    },
    {
      "id": "brick-gr-evolve",
      "slug": "brick-gr-evolve",
      "title": "GR Evolve Brick",
      "excerpt": "GR evolution brick and constraint diagnostics.",
      "bodyMD": "GR evolve brick packaging and diagnostics (server/gr-evolve-brick.ts) carry constraints, lapse, and shift data.\n\nMinimal artifact: GR evolve brick summary.",
      "tags": [
        "brick",
        "gr",
        "evolution"
      ],
      "children": [],
      "links": [
        {
          "rel": "parent",
          "to": "brick-lattice-dataflow-tree"
        }
      ],
      "summary": "GR evolution brick and constraint diagnostics.",
      "nodeType": "derived",
      "evidence": [
        {
          "type": "code",
          "path": "server/gr-evolve-brick.ts",
          "repo_rev": "a993f4618e92989c20b05232addbc333ded95a29",
          "content_hash": "sha256:60729772df9bb52a622e5fb4b7450b05a6e74a9273a27701b96c2c6248923654"
        },
        {
          "type": "test",
          "path": "tests/gr-advection-stability.spec.ts",
          "repo_rev": "a993f4618e92989c20b05232addbc333ded95a29",
          "content_hash": "sha256:428c275547add7ed7803b1dd101b35293b9f5f3ff9955931fb17a8335e4a741c"
        }
      ],
      "inputs": [
        {
          "name": "dims",
          "unit": "voxels",
          "type": "tuple[int,int,int]",
          "source": "GrEvolveBrickParams.dims"
        },
        {
          "name": "bounds",
          "unit": "m",
          "type": "bbox",
          "source": "GrEvolveBrickParams.bounds"
        },
        {
          "name": "dt_s",
          "unit": "s",
          "type": "float",
          "source": "GrEvolveBrickParams.dt_s"
        },
        {
          "name": "steps",
          "unit": "steps",
          "type": "int",
          "source": "GrEvolveBrickParams.steps"
        },
        {
          "name": "gauge",
          "unit": "1",
          "type": "GaugeParams",
          "source": "GrEvolveBrickParams.gauge"
        },
        {
          "name": "stencils",
          "unit": "1",
          "type": "StencilParams",
          "source": "GrEvolveBrickParams.stencils"
        }
      ],
      "outputs": [
        {
          "name": "stats",
          "unit": "1",
          "type": "GrEvolveBrickStats"
        },
        {
          "name": "constraints",
          "unit": "1",
          "type": "ConstraintFields"
        }
      ],
      "assumptions": [
        "Brick packaging wraps evolution diagnostics",
        "Constraints derived from evolved state"
      ],
      "validity": {
        "dims": {
          "min": 1
        },
        "dt_s": {
          "min": 0
        }
      },
      "deterministic": true,
      "tolerance": {
        "cfl_max": 0.5,
        "abs": 1e-06
      },
      "environment": {
        "runtime": "node"
      },
      "dependencies": [
        "brick-gr-initial",
        "brick-stress-energy"
      ],
      "predictability": {
        "status": "complete",
        "missing": []
      }
    },
    {
      "id": "brick-gr-initial",
      "slug": "brick-gr-initial",
      "title": "GR Initial Brick",
      "excerpt": "Initial conditions brick for GR runs.",
      "bodyMD": "GR initial brick packaging (server/gr-initial-brick.ts) defines initial conditions and stats.\n\nMinimal artifact: initial brick payload.",
      "tags": [
        "brick",
        "gr",
        "initial"
      ],
      "children": [],
      "links": [
        {
          "rel": "parent",
          "to": "brick-lattice-dataflow-tree"
        }
      ],
      "summary": "Initial conditions brick for GR runs.",
      "nodeType": "derived",
      "evidence": [
        {
          "type": "code",
          "path": "server/gr-initial-brick.ts",
          "repo_rev": "a993f4618e92989c20b05232addbc333ded95a29",
          "content_hash": "sha256:ae6fbe227e8182d60c074fb894651c7e6336b38918644333434ed23bd0e44b1a"
        },
        {
          "type": "doc",
          "path": "docs/knowledge/physics/york-time-constraints.md",
          "repo_rev": "a993f4618e92989c20b05232addbc333ded95a29",
          "content_hash": "sha256:1835eac20b5f3decbb2d464faeaa48042bb96b376188c0a304777c00b4b92aff"
        }
      ],
      "inputs": [
        {
          "name": "dims",
          "unit": "voxels",
          "type": "tuple[int,int,int]",
          "source": "InitialDataSolveParams.dims"
        },
        {
          "name": "bounds",
          "unit": "m",
          "type": "bbox",
          "source": "InitialDataSolveParams.bounds"
        },
        {
          "name": "iterations",
          "unit": "steps",
          "type": "int",
          "source": "InitialDataSolveParams.iterations"
        },
        {
          "name": "tolerance",
          "unit": "1",
          "type": "float",
          "source": "InitialDataSolveParams.tolerance"
        },
        {
          "name": "matter",
          "unit": "J/m^3",
          "type": "StressEnergyFieldSet|null",
          "source": "InitialDataSolveParams.matter"
        }
      ],
      "outputs": [
        {
          "name": "state",
          "unit": "1",
          "type": "BssnState"
        },
        {
          "name": "constraints",
          "unit": "1",
          "type": "ConstraintFields"
        },
        {
          "name": "solverStatus",
          "unit": "1",
          "type": "InitialDataStatus"
        }
      ],
      "assumptions": [
        "Lichnerowicz-York solve for initial conditions",
        "Vacuum inputs certify immediately"
      ],
      "validity": {
        "dims": {
          "min": 3
        },
        "iterations": {
          "min": 0
        }
      },
      "deterministic": true,
      "tolerance": null,
      "environment": {
        "runtime": "node"
      },
      "dependencies": [
        "brick-stress-energy"
      ],
      "predictability": {
        "status": "partial",
        "missing": [
          "tolerance"
        ]
      }
    },
    {
      "id": "brick-brick-serialization",
      "slug": "brick-brick-serialization",
      "title": "Brick Serialization",
      "excerpt": "Binary and JSON brick serialization formats.",
      "bodyMD": "Serialization helpers in server/curvature-brick.ts and server/stress-energy-brick.ts define JSON/binary transports for bricks.\n\nMinimal artifact: serialize/deserialize contract.",
      "tags": [
        "brick",
        "serialization",
        "schema"
      ],
      "children": [],
      "links": [
        {
          "rel": "parent",
          "to": "brick-lattice-dataflow-tree"
        }
      ],
      "summary": "Binary and JSON brick serialization formats.",
      "nodeType": "concept",
      "evidence": [
        {
          "type": "code",
          "path": "server/curvature-brick.ts",
          "repo_rev": "a993f4618e92989c20b05232addbc333ded95a29",
          "content_hash": "sha256:e79416d2cfa49a366bbce49af964d9248502099d3af33126a5e1e0c5a7c9130a"
        },
        {
          "type": "code",
          "path": "server/stress-energy-brick.ts",
          "repo_rev": "a993f4618e92989c20b05232addbc333ded95a29",
          "content_hash": "sha256:1a79a1ddd1873ecf5031860ddae0cd106448d9f46490bd92ac1d18b0da161f2e"
        }
      ],
      "inputs": [],
      "outputs": [],
      "assumptions": [],
      "validity": {},
      "deterministic": null,
      "tolerance": null,
      "environment": null,
      "dependencies": [],
      "predictability": {
        "status": "partial",
        "missing": [
          "inputs",
          "outputs",
          "assumptions",
          "validity",
          "deterministic",
          "tolerance",
          "environment"
        ]
      }
    },
    {
      "id": "brick-client-lattice",
      "slug": "brick-client-lattice",
      "title": "Client Lattice Utilities",
      "excerpt": "Client lattice frame, SDF, and surface adapters.",
      "bodyMD": "Client lattice utilities (client/src/lib/lattice-frame.ts, client/src/lib/lattice-sdf.ts, client/src/lib/lattice-surface.ts, client/src/lib/lattice-export.ts) decode bricks into lattice surfaces.\n\nMinimal artifact: lattice decode flow.",
      "tags": [
        "lattice",
        "client",
        "utils"
      ],
      "children": [],
      "links": [
        {
          "rel": "parent",
          "to": "brick-lattice-dataflow-tree"
        }
      ],
      "summary": "Client lattice frame, SDF, and surface adapters.",
      "nodeType": "concept",
      "evidence": [
        {
          "type": "code",
          "path": "client/src/lib/lattice-frame.ts",
          "repo_rev": "a993f4618e92989c20b05232addbc333ded95a29",
          "content_hash": "sha256:6efd4fc114632fe500b7eabc0a71cf77a00597fc6ad8573a9d571afde90cdf49"
        },
        {
          "type": "code",
          "path": "client/src/lib/lattice-sdf.ts",
          "repo_rev": "a993f4618e92989c20b05232addbc333ded95a29",
          "content_hash": "sha256:91fb0a6cf34b59f1b849a5919a386792087238aab87c166fe34cce3f88aace0d"
        },
        {
          "type": "code",
          "path": "client/src/lib/lattice-surface.ts",
          "repo_rev": "a993f4618e92989c20b05232addbc333ded95a29",
          "content_hash": "sha256:cf966d6f954c8a4c34b10372343df606ac3e6150a24aa13a136a8aebc1d5ed84"
        },
        {
          "type": "code",
          "path": "client/src/lib/lattice-export.ts",
          "repo_rev": "a993f4618e92989c20b05232addbc333ded95a29",
          "content_hash": "sha256:785f842caf3009dfe47f7bd03958f48a25064863a8b423282de6d247b5ffc972"
        }
      ],
      "inputs": [],
      "outputs": [],
      "assumptions": [],
      "validity": {},
      "deterministic": null,
      "tolerance": null,
      "environment": null,
      "dependencies": [],
      "predictability": {
        "status": "partial",
        "missing": [
          "inputs",
          "outputs",
          "assumptions",
          "validity",
          "deterministic",
          "tolerance",
          "environment"
        ]
      }
    },
    {
      "id": "brick-client-hooks",
      "slug": "brick-client-hooks",
      "title": "Client Brick Hooks",
      "excerpt": "Hooks that fetch and hydrate brick payloads.",
      "bodyMD": "Brick hooks (client/src/hooks/useGrBrick.ts, client/src/hooks/useGrEvolveBrick.ts, client/src/hooks/useStressEnergyBrick.ts, client/src/hooks/useLapseBrick.ts) hydrate payloads for panels.\n\nMinimal artifact: hook dataflow map.",
      "tags": [
        "hooks",
        "brick",
        "client"
      ],
      "children": [],
      "links": [
        {
          "rel": "parent",
          "to": "brick-lattice-dataflow-tree"
        }
      ],
      "summary": "Hooks that fetch and hydrate brick payloads.",
      "nodeType": "concept",
      "evidence": [
        {
          "type": "code",
          "path": "client/src/hooks/useGrBrick.ts",
          "repo_rev": "a993f4618e92989c20b05232addbc333ded95a29",
          "content_hash": "sha256:91ccb5f63caf4a083950b85b6b4d8a1ab575d01abd892276ae0438f2f89810fe"
        },
        {
          "type": "code",
          "path": "client/src/hooks/useGrEvolveBrick.ts",
          "repo_rev": "a993f4618e92989c20b05232addbc333ded95a29",
          "content_hash": "sha256:c31cf85c4bb7eac9a15ef1e4b0d3e0ce67d45defd965afd5449071645f27c7f4"
        },
        {
          "type": "code",
          "path": "client/src/hooks/useStressEnergyBrick.ts",
          "repo_rev": "a993f4618e92989c20b05232addbc333ded95a29",
          "content_hash": "sha256:d625cd2b70710a3543440c0e70297f8e6a34126017a46c889ac1c96f96eef16b"
        },
        {
          "type": "code",
          "path": "client/src/hooks/useLapseBrick.ts",
          "repo_rev": "a993f4618e92989c20b05232addbc333ded95a29",
          "content_hash": "sha256:aa474b09be92fed5ff1c70b42a850fc12ef07cfa454dcd420b76cc12650f41ee"
        }
      ],
      "inputs": [],
      "outputs": [],
      "assumptions": [],
      "validity": {},
      "deterministic": null,
      "tolerance": null,
      "environment": null,
      "dependencies": [],
      "predictability": {
        "status": "partial",
        "missing": [
          "inputs",
          "outputs",
          "assumptions",
          "validity",
          "deterministic",
          "tolerance",
          "environment"
        ]
      }
    },
    {
      "id": "brick-ui-panels",
      "slug": "brick-ui-panels",
      "title": "Brick Visualization Panels",
      "excerpt": "Panels rendering bricks and lattice views.",
      "bodyMD": "Panels rendering bricks (client/src/components/CurvatureTensorPanel.tsx, client/src/components/CurvatureSlicePanel.tsx, client/src/components/QiLatticePanel.tsx, client/src/components/SliceViewer.tsx, client/src/components/TimeDilationLatticePanel.tsx).\n\nMinimal artifact: brick panel map.",
      "tags": [
        "ui",
        "brick",
        "visualization"
      ],
      "children": [],
      "links": [
        {
          "rel": "parent",
          "to": "brick-lattice-dataflow-tree"
        }
      ],
      "summary": "Panels rendering bricks and lattice views.",
      "nodeType": "concept",
      "evidence": [
        {
          "type": "code",
          "path": "client/src/components/CurvatureTensorPanel.ts"
        },
        {
          "type": "code",
          "path": "client/src/components/CurvatureSlicePanel.ts"
        },
        {
          "type": "code",
          "path": "client/src/components/QiLatticePanel.ts"
        },
        {
          "type": "code",
          "path": "client/src/components/SliceViewer.ts"
        },
        {
          "type": "code",
          "path": "client/src/components/TimeDilationLatticePanel.ts"
        }
      ],
      "inputs": [],
      "outputs": [],
      "assumptions": [],
      "validity": {},
      "deterministic": null,
      "tolerance": null,
      "environment": null,
      "dependencies": [],
      "predictability": {
        "status": "partial",
        "missing": [
          "inputs",
          "outputs",
          "assumptions",
          "validity",
          "deterministic",
          "tolerance",
          "environment"
        ]
      }
    },
    {
      "id": "brick-constraints-tests",
      "slug": "brick-constraints-tests",
      "title": "Constraints and Tests",
      "excerpt": "Constraint gates and brick tests.",
      "bodyMD": "Brick-related constraint tests (tests/stress-energy-brick.spec.ts, tests/gr-constraint-gate.spec.ts, tests/gr-constraint-network.spec.ts) validate the GR brick flow.\n\nMinimal artifact: brick test summary.",
      "tags": [
        "tests",
        "constraints",
        "brick"
      ],
      "children": [],
      "links": [
        {
          "rel": "parent",
          "to": "brick-lattice-dataflow-tree"
        }
      ],
      "summary": "Constraint gates and brick tests.",
      "nodeType": "concept",
      "evidence": [
        {
          "type": "test",
          "path": "tests/stress-energy-brick.spec.ts",
          "repo_rev": "a993f4618e92989c20b05232addbc333ded95a29",
          "content_hash": "sha256:5c33bb7b66d252d2f435603fefdf6bb13b87e4ce997390fc2f330a76148acd6e"
        },
        {
          "type": "test",
          "path": "tests/gr-constraint-gate.spec.ts",
          "repo_rev": "a993f4618e92989c20b05232addbc333ded95a29",
          "content_hash": "sha256:bd73c7623295f4551b7e822a2ed4e7c36fb4854288ba690fd43d169a62958cf7"
        },
        {
          "type": "test",
          "path": "tests/gr-constraint-network.spec.ts",
          "repo_rev": "a993f4618e92989c20b05232addbc333ded95a29",
          "content_hash": "sha256:18f690ecc03a52d9b71d6d34a4d899000e49d273244648b3861c02c313301f2c"
        }
      ],
      "inputs": [],
      "outputs": [],
      "assumptions": [],
      "validity": {},
      "deterministic": null,
      "tolerance": null,
      "environment": null,
      "dependencies": [],
      "predictability": {
        "status": "partial",
        "missing": [
          "inputs",
          "outputs",
          "assumptions",
          "validity",
          "deterministic",
          "tolerance",
          "environment"
        ]
      }
    }
  ],
  "schema": {
    "name": "helix-ask-dag-node",
    "version": 1
  }
}
