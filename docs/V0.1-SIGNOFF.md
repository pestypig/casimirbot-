# v0.1 Agentic MVP - Sign-off

This harness verifies the two Hull-Mode gates plus the original 5-task smoke run, fully offline on a laptop.

## Prereqs (laptop)

```bash
export ENABLE_ESSENCE=1 ENABLE_AGI=1 ENABLE_LOG_TEXT=1
export ENABLE_TRACE_EXPORT=1 ENABLE_POLICY_REASONS=1 ENABLE_EVAL_REPLAY=1
export HULL_MODE=1 LLM_POLICY=local
export ENABLE_LLM_LOCAL_SPAWN=1
export LLM_LOCAL_CMD=./bin/llama-cli
export LLM_LOCAL_MODEL=./models/Local-7B-Q4.gguf
export LLM_LOCAL_ARGS_BASE="--ctx-size=8192 --n-gpu-layers=20 --threads=6 --no-color"
pnpm dev
```

This run list enables the trace exporter, policy reason surfacing, and eval replay envelope capture so the operator can keep provenance during Hull Mode.

## Export trace â†’ feed Codex

```bash
# 1) Create a trace in the Essence console (attach knowledge)

# 2) Export it
curl -s http://localhost:3000/api/agi/trace/<TRACE_ID>/export -o trace.json

# 3) Build a Codex context bundle
pnpm tsx scripts/bridge/trace-to-codex.ts trace.json
# -> outputs codex-context/<TRACE_ID>/ with context.md and export.json
```

## Run

```bash
pnpm run signoff:v0.1
# -> prints JSON:
# {
#   "spawn":{"ok":true,"traceId":"...","essenceId":"..."},
#   "metrics":{"ok":true,"spawn_calls":3,"spawn_latency_samples":3,"delta_calls":1,"delta_latency_samples":1},
#   "eval":{"total":5,"ok":4,"rate":0.8,"ok_target":0.7,"ran":true,"meets_target":true},
#   "ok":true
# }
```

**Pass criteria**

* Local Essence turn exists (`spawn.ok = true` plus an essenceId).
* `llm_local_spawn_*` counters increment (`metrics.delta_* > 0`).
* Smoke eval reaches the configured threshold (`rate >= EVAL_SUCCESS_TARGET`) or reports `skipped: true` on older stacks.
