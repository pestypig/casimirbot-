{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://casimirbot.local/schemas/math-claim-registry.schema.json",
  "title": "Math Claim Registry",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "schemaVersion",
    "registryId",
    "domain",
    "updatedAt",
    "claims"
  ],
  "properties": {
    "schemaVersion": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$"
    },
    "registryId": {
      "type": "string",
      "minLength": 3
    },
    "domain": {
      "type": "string",
      "minLength": 2
    },
    "updatedAt": {
      "type": "string",
      "format": "date"
    },
    "claims": {
      "type": "array",
      "minItems": 1,
      "items": {
        "$ref": "#/$defs/claim"
      }
    }
  },
  "$defs": {
    "source": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "kind",
        "citation"
      ],
      "properties": {
        "kind": {
          "type": "string",
          "enum": [
            "paper",
            "textbook",
            "spec",
            "repo-code",
            "dataset",
            "other"
          ]
        },
        "citation": {
          "type": "string",
          "minLength": 3
        },
        "equation": {
          "type": "string",
          "minLength": 2
        },
        "url": {
          "type": "string",
          "format": "uri"
        },
        "note": {
          "type": "string"
        }
      }
    },
    "rangeSpec": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Z": {
          "type": "array",
          "items": {
            "type": "integer"
          },
          "minItems": 2,
          "maxItems": 2
        },
        "n": {
          "type": "array",
          "items": {
            "type": "integer"
          },
          "minItems": 2,
          "maxItems": 2
        },
        "l": {
          "type": "array",
          "items": {
            "type": "integer"
          },
          "minItems": 2,
          "maxItems": 2
        },
        "m": {
          "type": "array",
          "items": {
            "type": "integer"
          },
          "minItems": 2,
          "maxItems": 2
        },
        "sampleCount": {
          "type": "array",
          "items": {
            "type": "integer"
          },
          "minItems": 2,
          "maxItems": 2
        }
      }
    },
    "validityDomain": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "system",
        "constraints"
      ],
      "properties": {
        "system": {
          "type": "string",
          "minLength": 2
        },
        "constraints": {
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "string",
            "minLength": 2
          }
        },
        "applicableRange": {
          "$ref": "#/$defs/rangeSpec"
        }
      }
    },
    "claim": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "claimId",
        "statement",
        "maturity",
        "validityDomain",
        "sources"
      ],
      "properties": {
        "claimId": {
          "type": "string",
          "pattern": "^[a-z0-9][a-z0-9._:-]{2,}$"
        },
        "statement": {
          "type": "string",
          "minLength": 8
        },
        "maturity": {
          "type": "string",
          "enum": [
            "exploratory",
            "reduced-order",
            "diagnostic",
            "certified"
          ]
        },
        "validityDomain": {
          "$ref": "#/$defs/validityDomain"
        },
        "sources": {
          "type": "array",
          "minItems": 1,
          "items": {
            "$ref": "#/$defs/source"
          }
        },
        "repoBindings": {
          "type": "array",
          "items": {
            "type": "string",
            "minLength": 3
          }
        },
        "notes": {
          "type": "string"
        }
      }
    }
  }
}

